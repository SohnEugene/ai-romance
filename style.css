/* AI Romance - Responsive Styles */

/* 배경 및 기본 설정 */
body {
    background: #000;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    position: relative;
    /* 화면 크기에 따라 기본 폰트 사이즈 조절 */
    font-size: clamp(14px, 1.5vw, 18px); 
}

/* story 컨테이너: 화면 하단 정렬 */
#story {
    width: 100%;
    height: 100vh; /* 전체 높이 사용 */
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: flex-end; /* 하단 정렬 */
    pointer-events: none; /* 배경 클릭 가능하게 하기 위해 컨테이너 클릭 통과 */
}

/* 텍스트 영역 레이아웃 */
#passages {
    width: 100%;
    max-width: 1000px; /* 너무 넓어지지 않게 제한 */
    margin: 0 auto;    /* 중앙 정렬 */
    margin-bottom: 2vh; /* 바닥에서 살짝 띄움 */
    position: relative;
    z-index: 10;
    pointer-events: auto; /* 텍스트 박스는 클릭 가능해야 함 */
}

.passage {
    /* 높이를 30vh로 유지하되, 최소 높이를 보장 */
    height: 30vh;
    min-height: 200px; /* 너무 작아지는 것 방지 */
    
    width: 90%;
    margin: 0 auto;

    background: rgba(255, 192, 203, 0.9);
    border: 2px solid #fff;
    border-radius: 15px;
    
    /* 패딩을 줄여서 글자가 들어갈 공간 확보 */
    padding: 2vh 2vw; 
    box-sizing: border-box;
    
    text-align: left;
    color: #000;
    
    /* 글자 크기와 줄 간격을 조금 더 타이트하게 조정 */
    font-size: clamp(14px, 1.1rem, 18px); 
    line-height: 1.4;
    
    /* 내용이 넘칠 때만 스크롤 표시 */
    overflow-y: auto; 
}

/* 패시지 내부의 불필요한 문단 여백 제거 */
.passage p {
    margin-top: 0;
    margin-bottom: 0.5em; /* 문단 사이 간격을 최소화 */
    padding: 0;
}

/* 제목(h1~h6)이나 수평선(hr)이 있을 경우 여백 감소 */
.passage h1, .passage h2, .passage h3 { margin: 0.2em 0; }
.passage hr { margin: 0.5em 0; }
/* 스크롤바 디자인 (미관상 숨기거나 얇게 처리) */
.passage::-webkit-scrollbar {
    width: 8px;
}
.passage::-webkit-scrollbar-thumb {
    background-color: #ff69b4;
    border-radius: 4px;
}

/* 배경 이미지 설정 */
body:has(.passage[data-tags~="bg1"]) {
    background-image: url('assets/background/background-1.jpg');
    background-size: cover;
    background-position: center;
}

body:has(.passage[data-tags~="bg2"]) {
    background-image: url('assets/background/background-2.jpg');
    background-size: cover;
    background-position: center;
}

/* 캐릭터 이미지 (중앙 하단 고정) */
#character-image {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    
    /* 화면 높이에 맞춰 이미지 크기 조절 */
    height: 70vh; 
    width: auto; /* 비율 유지 */
    max-width: 100%;
    
    object-fit: contain;
    z-index: 1;
    pointer-events: none;
}

/* 호감도 UI */
#right-sidebar {
    position: fixed;
    /* px 대신 vh, vw 단위를 사용하여 화면 비율에 따라 위치 조정 */
    top: 3vh; 
    right: 3vw;
    
    /* 너비를 화면 너비의 20%로 설정 (최소/최대 크기 제한) */
    width: 20vw; 
    min-width: 180px;
    max-width: 250px;

    padding: 1.5vh 1.5vw;
    
    background-color: rgba(0, 0, 0, 0.8);
    border: 2px solid #ff69b4;
    border-radius: 10px;
    z-index: 100;
    color: white;
    font-family: sans-serif;
    
    /* UI 내용물이 넘치지 않도록 박스 크기 계산 */
    box-sizing: border-box;
}

.sidebar-title {
    text-align: center;
    font-weight: bold;
    font-size: 1.1rem;
    margin-bottom: 1.5vh;
    border-bottom: 1px solid #555;
    padding-bottom: 1vh;
}

.char-box {
    margin-bottom: 1.5vh;
}

.char-name {
    display: inline-block;
    width: 30%;
    font-weight: bold;
    font-size: 1rem;
}

.char-score {
    float: right;
    font-size: 0.9rem;
    color: #ddd;
}

/* 게이지 바 */
progress {
    width: 100%;
    height: 1.5vh; /* 높이도 화면 비율에 맞춤 */
    appearance: none;
}

progress::-webkit-progress-bar {
    background-color: #444;
    border-radius: 5px;
}

progress::-webkit-progress-value {
    background-color: #ff69b4;
    border-radius: 5px;
    transition: width 0.5s;
}

#typewriter-box {
    font-family: 'Nanum Gothic', sans-serif;
    font-size: 1.2em;
    line-height: 1.4; /* 줄 간격 좁힘 */
    /* min-height: 100px; */
    white-space: pre-wrap;
    padding: 10px; /* 패딩 축소 */
    /* 배경색 제거 (대화창 배경과 통일감을 위해) */
    background-color: transparent; 
    color: #000; /* 글자색 검정 */
}

/* 현재 타이핑 중인 줄 */
.typing-line {
    margin: 0;
}

/* 문장 끝에 붙는 붓 아이콘 애니메이션 */
.next-icon {
    display: inline-block;
    margin-left: 8px;
    font-size: 0.8em;
    animation: blink-icon 1s infinite;
    cursor: pointer;
}

/* 아이콘 깜빡임 키프레임 */
@keyframes blink-icon {
    0%, 100% { opacity: 1; transform: translateY(0); }
    50% { opacity: 0.3; transform: translateY(-2px); }
}

/* 타이틀 화면 (기본 Twine 스타일로 복구) */

/* 1. 스토리 컨테이너 정렬 변경 (하단 -> 중앙) */
body[data-tags~="Title"] #story {
    align-items: center; /* 세로 중앙 정렬 */
}

/* 2. 패시지 상자 스타일 원상복구 (VN 스타일 해제) */
body[data-tags~="Title"] .passage {
    height: auto;           /* 고정 높이(30vh) 해제 */
    min-height: 0;
    width: 50%;             /* 너비 적당히 조절 */
    max-width: 800px;
    
    background: transparent; /* 핑크색 배경 제거 */
    border: none;           /* 테두리 제거 */
    border-radius: 0;
    
    padding: 0;             /* 패딩 제거 */
    color: #eee;            /* 글자색 흰색으로 (배경이 검정이므로) */
    font-size: 100%;        /* 폰트 크기 기본으로 */
    overflow: visible;      /* 스크롤 제거 */
}

/* 세이브/로드 메뉴 (Pause Screen) */

/* 전체 화면을 덮는 오버레이 */
#pause-screen {
    display: none; /* 기본적으로 숨김 */
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.85); /* 반투명 검은 배경 */
    z-index: 100000; /* 최상단 노출 */
    
    /* 내용물 중앙 정렬 (Flexbox) */
    display: flex; 
    flex-direction: column;
    justify-content: center;
    align-items: center;
    
    color: #fff;
    font-family: 'Nanum Gothic', sans-serif;
}

/* 메뉴 제목  
.pause-title {
    font-size: 2rem;
    margin-bottom: 40px;
    color: #ff69b4;
    text-shadow: 0 0 10px #ff69b4;
}*/

/* 버튼 컨테이너 (세로 배치) */
.pause-buttons {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 40px;
    width: 200px;
}

/* 저장/불러오기 메인 버튼 */
.pause-main-btn {
    padding: 15px 0;
    font-size: 1.2rem;
    background: transparent;
    border: 2px solid #fff;
    color: #fff;
    cursor: pointer;
    transition: all 0.3s;
    border-radius: 5px;
}

.pause-main-btn:hover {
    background: #ff69b4;
    border-color: #ff69b4;
}

/* 슬롯 컨테이너 (가로 배치) */
.slot-container {
    display: flex;
    flex-direction: row;
    gap: 15px;
    width: 80%;
    justify-content: center;
}

/* 개별 슬롯 박스 */
.save-slot {
    width: 120px;
    height: 120px;
    border: 2px solid #555;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.1);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 0.9rem;
    transition: all 0.2s;
    text-align: center;
    padding: 5px;
    box-sizing: border-box;
}

/* 슬롯 마우스 오버 */
.save-slot:hover {
    border-color: #aaa;
    background: rgba(255, 255, 255, 0.2);
}

/* 선택된 슬롯 (강조) */
.save-slot.selected {
    border-color: #ff69b4;
    background: rgba(255, 105, 180, 0.2);
    box-shadow: 0 0 15px #ff69b4;
}

/* 슬롯 내부 텍스트 */
.slot-id { font-weight: bold; margin-bottom: 5px; }
.slot-info { font-size: 0.8rem; color: #ccc; }
.slot-empty { color: #666; font-style: italic; }

/* 안내 메시지 영역 */
#pause-message {
    margin-top: 20px;
    height: 20px;
    color: #ff69b4;
    font-weight: bold;
}

/* 기본 UI 숨기기 & 전체 레이아웃 보정 */

/* SugarCube 기본 사이드바 숨김 */
#ui-bar {
    display: none !important;
}

/* 사이드바가 사라진 만큼 본문 영역을 왼쪽으로 당김 */
#story {
    margin-left: 0 !important;
}

/* 모바일 등에서 생길 수 있는 여백 제거 */
body {
    margin: 0 !important;
    padding: 0 !important;
}

/* 일시정지 시 게임 화면 잠금 */

/* 'paused' 클래스가 붙으면 게임 내용물 클릭 불가 */
#story.paused {
    pointer-events: none; /* 마우스 클릭 차단 */
}
/* 메뉴 화면은 클릭이 가능해야 함 */
#pause-screen {
    pointer-events: auto;
}